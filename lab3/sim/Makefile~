# -*- Makefile -*-
### Makefile - VHDL Makefile generated by Emacs VHDL Mode 3.38.1

# Project   : RISCV
# Platform  : ModelSim
# Generated : 2022-01-04 17:26:56 wackoz


# Define compilation command and options

COMPILE = vcom
OPTIONS = -93 -work work


# Define library paths

LIBRARY-work = ../hdl/work


# Define library unit files

UNIT-work-alu = \
	$(LIBRARY-work)/alu/_primary.dat
UNIT-work-alu-str = \
	$(LIBRARY-work)/alu/str.dat
UNIT-work-dec_5to32 = \
	$(LIBRARY-work)/dec_5to32/_primary.dat
UNIT-work-dec_5to32-arch = \
	$(LIBRARY-work)/dec_5to32/arch.dat
UNIT-work-decode_stage = \
	$(LIBRARY-work)/decode_stage/_primary.dat
UNIT-work-decode_stage-str = \
	$(LIBRARY-work)/decode_stage/str.dat
UNIT-work-execute_stage = \
	$(LIBRARY-work)/execute_stage/_primary.dat
UNIT-work-execute_stage-str = \
	$(LIBRARY-work)/execute_stage/str.dat
UNIT-work-fetch_stage = \
	$(LIBRARY-work)/fetch_stage/_primary.dat
UNIT-work-fetch_stage-str = \
	$(LIBRARY-work)/fetch_stage/str.dat
UNIT-work-immediate_generator = \
	$(LIBRARY-work)/immediate_generator/_primary.dat
UNIT-work-immediate_generator-str = \
	$(LIBRARY-work)/immediate_generator/str.dat
UNIT-work-mem_stage = \
	$(LIBRARY-work)/mem_stage/_primary.dat
UNIT-work-mem_stage-str = \
	$(LIBRARY-work)/mem_stage/str.dat
UNIT-work-mux_2to1 = \
	$(LIBRARY-work)/mux_2to1/_primary.dat
UNIT-work-mux_2to1-arch = \
	$(LIBRARY-work)/mux_2to1/arch.dat
UNIT-work-mux_32to1 = \
	$(LIBRARY-work)/mux_32to1/_primary.dat
UNIT-work-mux_32to1-arch = \
	$(LIBRARY-work)/mux_32to1/arch.dat
UNIT-work-param_pkg = \
	$(LIBRARY-work)/param_pkg/_primary.dat
UNIT-work-ram = \
	$(LIBRARY-work)/ram/_primary.dat
UNIT-work-ram-rtl = \
	$(LIBRARY-work)/ram/rtl.dat
UNIT-work-reg = \
	$(LIBRARY-work)/reg/_primary.dat
UNIT-work-reg-arch = \
	$(LIBRARY-work)/reg/arch.dat
UNIT-work-reg_file = \
	$(LIBRARY-work)/reg_file/_primary.dat
UNIT-work-reg_file-arch = \
	$(LIBRARY-work)/reg_file/arch.dat
UNIT-work-reg_file_tb = \
	$(LIBRARY-work)/reg_file_tb/_primary.dat
UNIT-work-reg_file_tb-arch = \
	$(LIBRARY-work)/reg_file_tb/arch.dat
UNIT-work-rv32i = \
	$(LIBRARY-work)/rv32i/_primary.dat
UNIT-work-rv32i-str = \
	$(LIBRARY-work)/rv32i/str.dat
UNIT-work-rv32i_tb = \
	$(LIBRARY-work)/rv32i_tb/_primary.dat
UNIT-work-rv32i_tb-arch = \
	$(LIBRARY-work)/rv32i_tb/arch.dat
UNIT-work-rv32i_tb_arch_cfg = \
	$(LIBRARY-work)/rv32i_tb_arch_cfg/_primary.dat


# Define list of all library unit files

ALL_UNITS = \
	$(UNIT-work-alu) \
	$(UNIT-work-alu-str) \
	$(UNIT-work-dec_5to32) \
	$(UNIT-work-dec_5to32-arch) \
	$(UNIT-work-decode_stage) \
	$(UNIT-work-decode_stage-str) \
	$(UNIT-work-execute_stage) \
	$(UNIT-work-execute_stage-str) \
	$(UNIT-work-fetch_stage) \
	$(UNIT-work-fetch_stage-str) \
	$(UNIT-work-immediate_generator) \
	$(UNIT-work-immediate_generator-str) \
	$(UNIT-work-mem_stage) \
	$(UNIT-work-mem_stage-str) \
	$(UNIT-work-mux_2to1) \
	$(UNIT-work-mux_2to1-arch) \
	$(UNIT-work-mux_32to1) \
	$(UNIT-work-mux_32to1-arch) \
	$(UNIT-work-param_pkg) \
	$(UNIT-work-ram) \
	$(UNIT-work-ram-rtl) \
	$(UNIT-work-reg) \
	$(UNIT-work-reg-arch) \
	$(UNIT-work-reg_file) \
	$(UNIT-work-reg_file-arch) \
	$(UNIT-work-reg_file_tb) \
	$(UNIT-work-reg_file_tb-arch) \
	$(UNIT-work-rv32i) \
	$(UNIT-work-rv32i-str) \
	$(UNIT-work-rv32i_tb) \
	$(UNIT-work-rv32i_tb-arch) \
	$(UNIT-work-rv32i_tb_arch_cfg)



# Rule for compiling entire design

all : \
		library \
		$(ALL_UNITS)


# Rule for cleaning entire design

clean : 
	-rm -f $(ALL_UNITS)


# Rule for creating library directory

library : \
		$(LIBRARY-work)

$(LIBRARY-work) :
	vlib $(LIBRARY-work); vmap work $(LIBRARY-work)


.PHONY : all clean library


# Rules for compiling single library units and their subhierarchy

alu : \
		library \
		$(UNIT-work-alu) \
		$(UNIT-work-alu-str)

dec_5to32 : \
		library \
		param_pkg \
		$(UNIT-work-dec_5to32) \
		$(UNIT-work-dec_5to32-arch)

decode_stage : \
		library \
		param_pkg \
		reg_file \
		$(UNIT-work-decode_stage) \
		$(UNIT-work-decode_stage-str)

execute_stage : \
		library \
		$(UNIT-work-execute_stage) \
		$(UNIT-work-execute_stage-str)

fetch_stage : \
		library \
		mux_2to1 \
		reg \
		$(UNIT-work-fetch_stage) \
		$(UNIT-work-fetch_stage-str)

immediate_generator : \
		library \
		$(UNIT-work-immediate_generator) \
		$(UNIT-work-immediate_generator-str)

mem_stage : \
		library \
		$(UNIT-work-mem_stage) \
		$(UNIT-work-mem_stage-str)

mux_2to1 : \
		library \
		param_pkg \
		$(UNIT-work-mux_2to1) \
		$(UNIT-work-mux_2to1-arch)

mux_32to1 : \
		library \
		param_pkg \
		$(UNIT-work-mux_32to1) \
		$(UNIT-work-mux_32to1-arch)

param_pkg : \
		library \
		$(UNIT-work-param_pkg)

ram : \
		library \
		$(UNIT-work-ram) \
		$(UNIT-work-ram-rtl)

reg : \
		library \
		param_pkg \
		$(UNIT-work-reg) \
		$(UNIT-work-reg-arch)

reg_file : \
		library \
		dec_5to32 \
		mux_32to1 \
		param_pkg \
		reg \
		$(UNIT-work-reg_file) \
		$(UNIT-work-reg_file-arch)

reg_file_tb : \
		library \
		param_pkg \
		reg_file \
		$(UNIT-work-reg_file_tb) \
		$(UNIT-work-reg_file_tb-arch)

rv32i \
RV32I : \
		library \
		alu \
		immediate_generator \
		mux_2to1 \
		param_pkg \
		reg_file \
		$(UNIT-work-rv32i) \
		$(UNIT-work-rv32i-str)

rv32i_tb \
RV32I_tb : \
		library \
		rv32i \
		$(UNIT-work-rv32i_tb) \
		$(UNIT-work-rv32i_tb-arch)

rv32i_tb_arch_cfg \
RV32I_tb_arch_cfg : \
		library \
		rv32i_tb \
		$(UNIT-work-rv32i_tb_arch_cfg)


# Rules for compiling single library unit files

$(UNIT-work-alu) \
$(UNIT-work-alu-str) : \
		../hdl/src/alu.vhd
	$(COMPILE) $(OPTIONS) ../hdl/src/alu.vhd

$(UNIT-work-dec_5to32) \
$(UNIT-work-dec_5to32-arch) : \
		../hdl/src/dec_5to32.vhd \
		$(UNIT-work-param_pkg)
	$(COMPILE) $(OPTIONS) ../hdl/src/dec_5to32.vhd

$(UNIT-work-decode_stage) \
$(UNIT-work-decode_stage-str) : \
		../hdl/src/decode_stage.vhd \
		$(UNIT-work-param_pkg) \
		$(UNIT-work-reg_file)
	$(COMPILE) $(OPTIONS) ../hdl/src/decode_stage.vhd

$(UNIT-work-execute_stage) \
$(UNIT-work-execute_stage-str) : \
		../hdl/src/execute_stage.vhd
	$(COMPILE) $(OPTIONS) ../hdl/src/execute_stage.vhd

$(UNIT-work-fetch_stage) \
$(UNIT-work-fetch_stage-str) : \
		../hdl/src/fetch_stage.vhd \
		$(UNIT-work-mux_2to1) \
		$(UNIT-work-reg)
	$(COMPILE) $(OPTIONS) ../hdl/src/fetch_stage.vhd

$(UNIT-work-immediate_generator) \
$(UNIT-work-immediate_generator-str) : \
		../hdl/src/immediate_generator.vhd
	$(COMPILE) $(OPTIONS) ../hdl/src/immediate_generator.vhd

$(UNIT-work-mem_stage) \
$(UNIT-work-mem_stage-str) : \
		../hdl/src/mem_stage.vhd
	$(COMPILE) $(OPTIONS) ../hdl/src/mem_stage.vhd

$(UNIT-work-mux_2to1) \
$(UNIT-work-mux_2to1-arch) : \
		../hdl/src/mux_2to1.vhd \
		$(UNIT-work-param_pkg)
	$(COMPILE) $(OPTIONS) ../hdl/src/mux_2to1.vhd

$(UNIT-work-mux_32to1) \
$(UNIT-work-mux_32to1-arch) : \
		../hdl/src/mux_32to1.vhd \
		$(UNIT-work-param_pkg)
	$(COMPILE) $(OPTIONS) ../hdl/src/mux_32to1.vhd

$(UNIT-work-param_pkg) : \
		../hdl/src/param_pkg.vhd
	$(COMPILE) $(OPTIONS) ../hdl/src/param_pkg.vhd

$(UNIT-work-ram) \
$(UNIT-work-ram-rtl) : \
		../hdl/src/ram.vhd
	$(COMPILE) $(OPTIONS) ../hdl/src/ram.vhd

$(UNIT-work-reg) \
$(UNIT-work-reg-arch) : \
		../hdl/src/reg.vhd \
		$(UNIT-work-param_pkg)
	$(COMPILE) $(OPTIONS) ../hdl/src/reg.vhd

$(UNIT-work-reg_file) \
$(UNIT-work-reg_file-arch) : \
		../hdl/src/reg_file.vhd \
		$(UNIT-work-dec_5to32) \
		$(UNIT-work-mux_32to1) \
		$(UNIT-work-param_pkg) \
		$(UNIT-work-reg)
	$(COMPILE) $(OPTIONS) ../hdl/src/reg_file.vhd

$(UNIT-work-reg_file_tb) \
$(UNIT-work-reg_file_tb-arch) : \
		../hdl/tb/reg_file_tb.vhd \
		$(UNIT-work-param_pkg) \
		$(UNIT-work-reg_file)
	$(COMPILE) $(OPTIONS) ../hdl/tb/reg_file_tb.vhd

$(UNIT-work-rv32i) \
$(UNIT-work-rv32i-str) : \
		../hdl/src/RV32I.vhd \
		$(UNIT-work-alu) \
		$(UNIT-work-immediate_generator) \
		$(UNIT-work-mux_2to1) \
		$(UNIT-work-param_pkg) \
		$(UNIT-work-reg_file)
	$(COMPILE) $(OPTIONS) ../hdl/src/RV32I.vhd

$(UNIT-work-rv32i_tb) \
$(UNIT-work-rv32i_tb-arch) \
$(UNIT-work-rv32i_tb_arch_cfg) : \
		../hdl/tb/RV32I_tb.vhd \
		$(UNIT-work-rv32i)
	$(COMPILE) $(OPTIONS) ../hdl/tb/RV32I_tb.vhd


### Makefile ends here
