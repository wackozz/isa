# -*- Makefile -*-
### Makefile - VHDL Makefile generated by Emacs VHDL Mode 3.38.1

# Directory : "~/github/isa/lab3/hdl/src/"
# Platform  : ModelSim
# Generated : 2021-12-22 20:49:21 wackoz


# Define compilation command and options

COMPILE = vcom
OPTIONS = -93 -work work


# Define library paths

LIBRARY-work = work


# Define library unit files

UNIT-work-dec_5to32 = \
	$(LIBRARY-work)/dec_5to32/_primary.dat
UNIT-work-dec_5to32-arch = \
	$(LIBRARY-work)/dec_5to32/arch.dat
UNIT-work-immediate_generator = \
	$(LIBRARY-work)/immediate_generator/_primary.dat
UNIT-work-immediate_generator-str = \
	$(LIBRARY-work)/immediate_generator/str.dat
UNIT-work-mux_2to1 = \
	$(LIBRARY-work)/mux_2to1/_primary.dat
UNIT-work-mux_2to1-arch = \
	$(LIBRARY-work)/mux_2to1/arch.dat
UNIT-work-mux_32to1 = \
	$(LIBRARY-work)/mux_32to1/_primary.dat
UNIT-work-mux_32to1-arch = \
	$(LIBRARY-work)/mux_32to1/arch.dat
UNIT-work-param_pkg = \
	$(LIBRARY-work)/param_pkg/_primary.dat
UNIT-work-reg = \
	$(LIBRARY-work)/reg/_primary.dat
UNIT-work-reg-arch = \
	$(LIBRARY-work)/reg/arch.dat
UNIT-work-reg_file = \
	$(LIBRARY-work)/reg_file/_primary.dat
UNIT-work-reg_file-arch = \
	$(LIBRARY-work)/reg_file/arch.dat
UNIT-work-rv32i = \
	$(LIBRARY-work)/rv32i/_primary.dat
UNIT-work-rv32i-str = \
	$(LIBRARY-work)/rv32i/str.dat


# Define list of all library unit files

ALL_UNITS = \
	$(UNIT-work-dec_5to32) \
	$(UNIT-work-dec_5to32-arch) \
	$(UNIT-work-immediate_generator) \
	$(UNIT-work-immediate_generator-str) \
	$(UNIT-work-mux_2to1) \
	$(UNIT-work-mux_2to1-arch) \
	$(UNIT-work-mux_32to1) \
	$(UNIT-work-mux_32to1-arch) \
	$(UNIT-work-param_pkg) \
	$(UNIT-work-reg) \
	$(UNIT-work-reg-arch) \
	$(UNIT-work-reg_file) \
	$(UNIT-work-reg_file-arch) \
	$(UNIT-work-rv32i) \
	$(UNIT-work-rv32i-str)



# Rule for compiling entire design

all : \
		library \
		$(ALL_UNITS)


# Rule for cleaning entire design

clean : 
	-rm -f $(ALL_UNITS)


# Rule for creating library directory

library : \
		$(LIBRARY-work)

$(LIBRARY-work) :
	vlib $(LIBRARY-work); vmap work $(LIBRARY-work)


.PHONY : all clean library


# Rules for compiling single library units and their subhierarchy

dec_5to32 : \
		library \
		param_pkg \
		$(UNIT-work-dec_5to32) \
		$(UNIT-work-dec_5to32-arch)

immediate_generator : \
		library \
		$(UNIT-work-immediate_generator) \
		$(UNIT-work-immediate_generator-str)

mux_2to1 : \
		library \
		param_pkg \
		$(UNIT-work-mux_2to1) \
		$(UNIT-work-mux_2to1-arch)

mux_32to1 : \
		library \
		param_pkg \
		$(UNIT-work-mux_32to1) \
		$(UNIT-work-mux_32to1-arch)

param_pkg : \
		library \
		$(UNIT-work-param_pkg)

reg : \
		library \
		param_pkg \
		$(UNIT-work-reg) \
		$(UNIT-work-reg-arch)

reg_file : \
		library \
		dec_5to32 \
		mux_32to1 \
		param_pkg \
		reg \
		$(UNIT-work-reg_file) \
		$(UNIT-work-reg_file-arch)

rv32i \
RV32I : \
		library \
		immediate_generator \
		mux_2to1 \
		param_pkg \
		reg \
		reg_file \
		$(UNIT-work-rv32i) \
		$(UNIT-work-rv32i-str)


# Rules for compiling single library unit files

$(UNIT-work-dec_5to32) \
$(UNIT-work-dec_5to32-arch) : \
		dec_5to32.vhd \
		$(UNIT-work-param_pkg)
	$(COMPILE) $(OPTIONS) dec_5to32.vhd

$(UNIT-work-immediate_generator) \
$(UNIT-work-immediate_generator-str) : \
		immediate_generator.vhd
	$(COMPILE) $(OPTIONS) immediate_generator.vhd

$(UNIT-work-mux_2to1) \
$(UNIT-work-mux_2to1-arch) : \
		mux_2to1.vhd \
		$(UNIT-work-param_pkg)
	$(COMPILE) $(OPTIONS) mux_2to1.vhd

$(UNIT-work-mux_32to1) \
$(UNIT-work-mux_32to1-arch) : \
		mux_32to1.vhd \
		$(UNIT-work-param_pkg)
	$(COMPILE) $(OPTIONS) mux_32to1.vhd

$(UNIT-work-param_pkg) : \
		param_pkg.vhd
	$(COMPILE) $(OPTIONS) param_pkg.vhd

$(UNIT-work-reg) \
$(UNIT-work-reg-arch) : \
		reg.vhd \
		$(UNIT-work-param_pkg)
	$(COMPILE) $(OPTIONS) reg.vhd

$(UNIT-work-reg_file) \
$(UNIT-work-reg_file-arch) : \
		reg_file.vhd \
		$(UNIT-work-dec_5to32) \
		$(UNIT-work-mux_32to1) \
		$(UNIT-work-param_pkg) \
		$(UNIT-work-reg)
	$(COMPILE) $(OPTIONS) reg_file.vhd

$(UNIT-work-rv32i) \
$(UNIT-work-rv32i-str) : \
		RV32I.vhd \
		$(UNIT-work-immediate_generator) \
		$(UNIT-work-mux_2to1) \
		$(UNIT-work-param_pkg) \
		$(UNIT-work-reg) \
		$(UNIT-work-reg_file)
	$(COMPILE) $(OPTIONS) RV32I.vhd


### Makefile ends here
